const getdata=function(t,e){fetch(t).then(t=>t.json()).then(t=>{e(t)})},getcsvdata=function(t,e){fetch(t).then(t=>t.text()).then(t=>{let n=t.length,l="",o=0;for(let r=0;r<n;r++)'"'==t.substring(r,r+1)&&o++,"\n"==t.substring(r,r+1)&&o%2!=0&&(t=l=t.substring(0,r)+" "+t.substring(r+1));let i=t.split(/\r?\n|\r|\n/g),s="",u="",g="",c="",h=i[0].split(","),a=[];for(let f=1;f<i.length;f++){a[f-1]={},s=i[f].split(/[,]{1}(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/);for(let p=0;p<s.length;p++)s[p].trim(),'"'==(g='"'==s[p].substring(0,1)?s[p].substring(1,s[p].length):s[p]).substring(g.length-2,g.length)&&(g=g.substring(0,g.length-2)),u=(c='"'==g.substring(g.length-1,g.length)?g.substring(0,g.length-1):g).replace(/""/g,'"'),a[f-1][h[p]]=u}e(a)})},gsdata=function(t,e){getcsvdata(GoogleSheetCsvURL(t),function(t){e(t)})},empty=function(t){return void 0===t||""==t||null==t},notempty=function(t){return void 0!==t&&""!=t&&null!=t},imagefromallsources=function(t){let e=t,n=t;t.match(/(\&$)/gm)&&(n=t.replace(/(\&$)/gm,"")),n.match(/https:\/\/drive\.google\.com\/open\?(.*)/i)&&(e="https://lh3.googleusercontent.com/d/"+n.match(/https:\/\/drive\.google\.com\/open\?id=(.*)/i)[1]),n.match(/https:\/\/drive\.google\.com\/file\/d/i)&&(e="https://lh3.googleusercontent.com/d/"+n.match(/https:\/\/drive\.google\.com\/file\/d\/(.*)\/view/i)[1]),n.match(/https:\/\/drive\.google\.com\/uc\?export=view/i)&&(e="https://lh3.googleusercontent.com/d/"+n.match(/id=(.*)/i)[1]);let l=n.replace(/\&amp;/gi,"&"),o=l.match(/(http:|https:|)\/\/(player.|www.|m.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);return void 0!==o&&null!=o&&(e="https://img.youtube.com/vi/"+o[6]+"/0.jpg"),l.match(/\.png|\.svg|\.jpg|\.gif|.webp/i)&&(e=l),e};imagetable=function(t,e,n){let l="",o=4,r="cover",i="1/1",s=0,u=t.length;void 0!==n&&null!=n&&""!=n&&(void 0!==n.columns&&null!=n.columns&&""!=n.columns&&(o=n.columns),void 0!==n.type&&null!=n.type&&""!=n.type&&(r=n.type),void 0!==n.proportion&&null!=n.proportion&&""!=n.proportion&&(i=n.proportion),void 0!==n.index&&null!=n.index&&""!=n.index&&(s=n.index),s>t.length&&(s=t.length),void 0!==n.size&&null!=n.size&&""!=n.size&&(u=s+n.size),u>=t.length&&(u=t.length));let g="";for(let c=0;c<o;c++)g+=" 1fr";l+=`
   <style>
          .datat_elemtyp05 {
             display: grid;
             gap: 16px 16px;
             width: 100%;
          }

          .datat_elemtyp05 div {
             background-position: top center;
          }

          .datat_elemtyp05 div:hover {
             cursor: pointer;
          }

          @media screen and (max-width: 720px) {
             .datat_elemtyp05 {
                  grid-template-columns: 1fr !important;
            }
          }
   </style>

   <div class="datat_elemtyp05 datat_imagetable" style='grid-template-columns:${g};'>`;for(let h=s;h<u;h++)l+=`<div class="datat_imagetable_images" onclick='window.open("${imagefromallsources(t[h][e])}")' style='background-repeat: no-repeat; background-size: ${r}; aspect-ratio: ${i}; background-image: url("${imagefromallsources(t[h][e])}");'></div>`;return html`${l+="</div>"}`};const googlesheet=function(t,e){return`https://opensheet.elk.sh/${t.match(/spreadsheets\/d\/(.*)\/edit/i)[1]}/${e}`},GoogleSheetCsvURL=function(t){t=new URL(t);let e=t.pathname.split("/")[3],n=new URLSearchParams(t.hash.slice(1)).get("gid")||0;return`https://docs.google.com/spreadsheets/d/${e}/export?format=csv&gid=${n}`},rescale=function([t,e],[n,l]){return function(o){return(o-t)/(e-t)*(l-n)+n}},bfilter=function(t,e){let n=[],l=0;for(let o=0;o<t.length;o++)""!=t[o][e]&&void 0!=t[o][e]&&(n[l]={},n[l]=t[o],l++);return n},cfilter=function(t,e,n){let l=[],o=RegExp(n,"i"),r=0;for(let i=0;i<t.length;i++)""!=t[i][e]&&void 0!=t[i][e]&&o.test(t[i][e])&&(l[r]={},l[r]=t[i],r++);return l},sumarray=function(t,e){let n=[],l=0;for(let o=0;o<t.length;o++)n[l]=t[o],l++;for(let r=0;r<e.length;r++)n[l]=e[r],l++;return n},sumarrayc=function(t,e){let n=[],l=0;for(let o=0;o<t.length;o++)n[l]=t[o],l++;for(let r=0;r<e.length;r++)n[l]=e[r],l++;let i=[];for(let s=0;s<n.length;s++)for(let u in n[s])i[u]=!0;let g=[],c=0;for(let h in i)g[c]=h,c++;let a=[];for(let f=0;f<n.length;f++){a[f]={};for(let p=0;p<g.length;p++)void 0===n[f][g[p]]||null==n[f][g[p]]||""==n[f][g[p]]?a[f][g[p]]="":a[f][g[p]]=n[f][g[p]]}return a},aSubtract=function(t,e){var n=[],l=0;for(let o=0;o<t.length;o++){let r=!1;for(let i=0;i<e.length;i++)t[o]==e[i]&&(r=!0);!1==r&&(n[l]=t[o],l++)}return n},unique=function(t,e){let n=[];for(let l=0;l<t.length;l++)n[t[l][e]]=0;let o=[];for(let r in n)o.push(r);return o},sortbylist=function(t,e,n){let l=[];for(let o=0;o<e.length;o++)for(let r=0;r<t.length;r++)t[r][n]==e[o]&&l.push(t[r]);return l},alphabetic=function(t,e){let n=unique(t,e);return n.sort(),sortbylist(t,n,e)},tags=function(t,e,n){let l=[],o=[];for(let r=0;r<t.length;r++){o=[],o=t[r][e].split(n);for(let i=0;i<o.length;i++)l.push(o[i])}let s=[];for(let u=0;u<l.length;u++)s[l[u]]=0;let g=[];for(let c in s)g.push(c);return g},shuffle=function(t,e){let n=[],l=0,o=!1,r=0;for(;l<e;){r=parseInt(Math.random()*t),o=!1;for(let i=0;i<n.length;i++)r==n[i]&&(o=!0);!o&&(n[n.length]=r,l++)}return n},select=function(t,e,n){let l=[];for(let o=0;o<t.length;o++)e(l,t[o],n);return l},patterncheck=function(t,e,n){let l=!1;for(let o=0;o<Object.keys(e).length;o++)n.test(e[Object.keys(e)[o]])&&(l=!0);l&&t.push(e)},selectp=function(t,e){return select(t,patterncheck,e)},multipatterncheck_add=function(t,e,n){if(""!=n||void 0!==n){let l=!1,o=n.split(" "),r="";for(let i=0;i<o.length;i++)for(let s=0;s<Object.keys(e).length;s++)(r=RegExp(o[i],"i")).test(e[Object.keys(e)[s]])&&(l=!0);l&&t.push(e)}else t.push(e)},selecta=function(t,e){return select(t,multipatterncheck_add,e)},multipatterncheck_exclude=function(t,e,n){if(""!=n||void 0!==n){let l=n.split(" "),o="",r=[],i=!0;for(let s=0;s<l.length;s++)r[l[s]]=!1;for(let u=0;u<Object.keys(e).length;u++)for(let g=0;g<l.length;g++)(o=RegExp(l[g],"i")).test(e[Object.keys(e)[u]])&&(r[l[g]]=!0);for(let c=0;c<l.length;c++)!1==r[l[c]]&&(i=!1);i&&t.push(e)}else t.push(e)},selecte=function(t,e){return select(t,multipatterncheck_exclude,e)};let omnifdados=[],omnifilterfetchdata=function(t,e){fetch(t).then(t=>t.json()).then(t=>{startomnifilter(t,e,omnifilter)})},omnifilterfetchcsvdata=function(t,e){fetch(t).then(t=>t.text()).then(t=>{let n=t.length,l="",o=0;for(let r=0;r<n;r++)'"'==t.substring(r,r+1)&&o++,"\n"==t.substring(r,r+1)&&o%2!=0&&(t=l=t.substring(0,r)+" "+t.substring(r+1));let i=t.split(/\r?\n|\r|\n/g),s="",u="",g="",c="",h=i[0].split(","),a=[];for(let f=1;f<i.length;f++){a[f-1]={},s=i[f].split(/[,]{1}(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/);for(let p=0;p<s.length;p++)s[p].trim(),'"'==(g='"'==s[p].substring(0,1)?s[p].substring(1,s[p].length):s[p]).substring(g.length-2,g.length)&&(g=g.substring(0,g.length-2)),u=(c='"'==g.substring(g.length-1,g.length)?g.substring(0,g.length-1):g).replace(/""/g,'"'),a[f-1][h[p]]=u}startomnifilter(a,e,omnifilter)})},startomnifilter=function(t,e,n){console.log("Omnifilter: fetch finished"),console.table(t),document.getElementById(e).addEventListener("input",function(e){n(select(t,multipatterncheck_exclude,this.value))}),console.log("Omnifilter: filtering event listener started");n(select(t,multipatterncheck_exclude,""))};