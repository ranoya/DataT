const getdata=function(t,e){fetch(t).then((t=>t.json())).then((t=>{e(t)}))},getcsvdata=function(t,e){fetch(t).then((t=>t.text())).then((t=>{let n=t.length,l="",s=0;for(let e=0;e<n;e++)'"'==t.substring(e,e+1)&&s++,"\n"==t.substring(e,e+1)&&s%2!=0&&(l=t.substring(0,e)+" "+t.substring(e+1),t=l);let i=t.split(/\r?\n|\r|\n/g),r="",o="",g="",h="",c=i[0].split(","),u=[];for(let t=1;t<i.length;t++){u[t-1]={},r=i[t].split(/[,]{1}(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/);for(let e=0;e<r.length;e++)r[e].trim(),g='"'==r[e].substring(0,1)?r[e].substring(1,r[e].length):r[e],'"'==g.substring(g.length-2,g.length)&&(g=g.substring(0,g.length-2)),h='"'==g.substring(g.length-1,g.length)?g.substring(0,g.length-1):g,o=h.replace(/""/g,'"'),u[t-1][c[e]]=o}e(u)}))},gsdata=function(t,e){var n,l;n=GoogleSheetCsvURL(t),l=function(t){e(t)},fetch(n).then((t=>t.text())).then((t=>{let e=t.length,n="",s=0;for(let l=0;l<e;l++)'"'==t.substring(l,l+1)&&s++,"\n"==t.substring(l,l+1)&&s%2!=0&&(n=t.substring(0,l)+" "+t.substring(l+1),t=n);let i=t.split(/\r?\n|\r|\n/g),r="",o="",g="",h="",c=i[0].split(","),u=[];for(let t=1;t<i.length;t++){u[t-1]={},r=i[t].split(/[,]{1}(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/);for(let e=0;e<r.length;e++)r[e].trim(),g='"'==r[e].substring(0,1)?r[e].substring(1,r[e].length):r[e],'"'==g.substring(g.length-2,g.length)&&(g=g.substring(0,g.length-2)),h='"'==g.substring(g.length-1,g.length)?g.substring(0,g.length-1):g,o=h.replace(/""/g,'"'),u[t-1][c[e]]=o}l(u)}))},imagefromallsources=function(t){let e=t,n=t;if(t.match(/(\&$)/gm)&&(n=t.replace(/(\&$)/gm,"")),n.match(/https:\/\/drive\.google\.com\/open\?(.*)/i)){e="https://lh3.googleusercontent.com/d/"+n.match(/https:\/\/drive\.google\.com\/open\?id=(.*)/i)[1]}if(n.match(/https:\/\/drive\.google\.com\/file\/d/i)){e="https://lh3.googleusercontent.com/d/"+n.match(/https:\/\/drive\.google\.com\/file\/d\/(.*)\/view/i)[1]}if(n.match(/https:\/\/drive\.google\.com\/uc\?export=view/i)){e="https://lh3.googleusercontent.com/d/"+n.match(/id=(.*)/i)[1]}let l=n.replace(/\&amp;/gi,"&"),s=l.match(/(http:|https:|)\/\/(player.|www.|m.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);return void 0!==s&&null!=s&&(e="https://img.youtube.com/vi/"+s[6]+"/0.jpg"),l.match(/\.png|\.svg|\.jpg|\.gif|.webp/i)&&(e=l),e},googlesheet=function(t,e){return`https://opensheet.elk.sh/${t.match(/spreadsheets\/d\/(.*)\/edit/i)[1]}/${e}`},GoogleSheetCsvURL=function(t){return`https://docs.google.com/spreadsheets/d/${(t=new URL(t)).pathname.split("/")[3]}/export?format=csv&gid=${new URLSearchParams(t.hash.slice(1)).get("gid")||0}`},rescale=function([t,e],[n,l]){return function(s){return(s-t)/(e-t)*(l-n)+n}},bfilter=function(t,e){let n=[],l=0;for(let s=0;s<t.length;s++)""!=t[s][e]&&null!=t[s][e]&&(n[l]={},n[l]=t[s],l++);return n},cfilter=function(t,e,n){let l=[],s=new RegExp(n,"i"),i=0;for(let n=0;n<t.length;n++)""!=t[n][e]&&null!=t[n][e]&&s.test(t[n][e])&&(l[i]={},l[i]=t[n],i++);return l},unique=function(t,e){let n=[];for(let l=0;l<t.length;l++)n[t[l][e]]=0;let l=[];for(let t in n)l.push(t);return l},sortbylist=function(t,e,n){let l=[];for(let s=0;s<e.length;s++)for(let i=0;i<t.length;i++)t[i][n]==e[s]&&l.push(t[i]);return l},alphabetic=function(t,e){let n=unique(t,e);return n.sort(),sortbylist(t,n,e)},tags=function(t,e,n){let l=[],s=[];for(let i=0;i<t.length;i++){s=[],s=t[i][e].split(n);for(let t=0;t<s.length;t++)l.push(s[t])}let i=[];for(let t=0;t<l.length;t++)i[l[t]]=0;let r=[];for(let t in i)r.push(t);return r},shuffle=function(t,e){let n=[],l=0,s=!1,i=0;for(;l<e;){i=parseInt(Math.random()*t),s=!1;for(let t=0;t<n.length;t++)i==n[t]&&(s=!0);s||(n[n.length]=i,l++)}return n},select=function(t,e,n){let l=[];for(let s=0;s<t.length;s++)e(l,t[s],n);return l},patterncheck=function(t,e,n){let l=!1;for(let t=0;t<Object.keys(e).length;t++)n.test(e[Object.keys(e)[t]])&&(l=!0);l&&t.push(e)},selectp=function(t,e){return select(t,patterncheck,e)},multipatterncheck_add=function(t,e,n){if(""!=n||void 0!==n){let l=!1,s=n.split(" "),i="";for(let t=0;t<s.length;t++)for(let n=0;n<Object.keys(e).length;n++)i=new RegExp(s[t],"i"),i.test(e[Object.keys(e)[n]])&&(l=!0);l&&t.push(e)}else t.push(e)},selecta=function(t,e){return select(t,multipatterncheck_add,e)},multipatterncheck_exclude=function(t,e,n){if(""!=n||void 0!==n){let l=n.split(" "),s="",i=[],r=!0;for(let t=0;t<l.length;t++)i[l[t]]=!1;for(let t=0;t<Object.keys(e).length;t++)for(let n=0;n<l.length;n++)s=new RegExp(l[n],"i"),s.test(e[Object.keys(e)[t]])&&(i[l[n]]=!0);for(let t=0;t<l.length;t++)0==i[l[t]]&&(r=!1);r&&t.push(e)}else t.push(e)},selecte=function(t,e){return select(t,multipatterncheck_exclude,e)};let omnifdados=[],omnifilterfetchdata=function(t,e){fetch(t).then((t=>t.json())).then((t=>{startomnifilter(t,e,omnifilter)}))},omnifilterfetchcsvdata=function(t,e){fetch(t).then((t=>t.text())).then((t=>{let n=t.length,l="",s=0;for(let e=0;e<n;e++)'"'==t.substring(e,e+1)&&s++,"\n"==t.substring(e,e+1)&&s%2!=0&&(l=t.substring(0,e)+" "+t.substring(e+1),t=l);let i=t.split(/\r?\n|\r|\n/g),r="",o="",g="",h="",c=i[0].split(","),u=[];for(let t=1;t<i.length;t++){u[t-1]={},r=i[t].split(/[,]{1}(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/);for(let e=0;e<r.length;e++)r[e].trim(),g='"'==r[e].substring(0,1)?r[e].substring(1,r[e].length):r[e],'"'==g.substring(g.length-2,g.length)&&(g=g.substring(0,g.length-2)),h='"'==g.substring(g.length-1,g.length)?g.substring(0,g.length-1):g,o=h.replace(/""/g,'"'),u[t-1][c[e]]=o}startomnifilter(u,e,omnifilter)}))},startomnifilter=function(t,e,n){console.log("Omnifilter: fetch finished"),console.table(t),document.getElementById(e).addEventListener("input",(function(e){let l=select(t,multipatterncheck_exclude,this.value);n(l)})),console.log("Omnifilter: filtering event listener started");let l=select(t,multipatterncheck_exclude,"");n(l)};