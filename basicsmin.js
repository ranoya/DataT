const getdata=function(t,e){fetch(t).then(t=>t.json()).then(t=>{e(t)})},getcsvdata=function(t,e){fetch(t).then(t=>t.text()).then(t=>{let n=t.length,l="",r=0;for(let i=0;i<n;i++)'"'==t.substring(i,i+1)&&r++,"\n"==t.substring(i,i+1)&&r%2!=0&&(t=l=t.substring(0,i)+" "+t.substring(i+1));let o=t.split(/\r?\n|\r|\n/g),s="",g="",h="",u="",c=o[0].split(","),f=[];for(let $=1;$<o.length;$++){f[$-1]={},s=o[$].split(/[,]{1}(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/);for(let p=0;p<s.length;p++)s[p].trim(),'"'==(h='"'==s[p].substring(0,1)?s[p].substring(1,s[p].length):s[p]).substring(h.length-2,h.length)&&(h=h.substring(0,h.length-2)),g=(u='"'==h.substring(h.length-1,h.length)?h.substring(0,h.length-1):h).replace(/""/g,'"'),f[$-1][c[p]]=g}e(f)})},gsdata=function(t,e){getcsvdata(GoogleSheetCsvURL(t),function(t){e(t)})},empty=function(t){return void 0===t||""==t||null==t},notempty=function(t){return void 0!==t&&""!=t&&null!=t},imagefromallsources=function(t){let e=t,n=t;t.match(/(\&$)/gm)&&(n=t.replace(/(\&$)/gm,"")),n.match(/https:\/\/drive\.google\.com\/open\?(.*)/i)&&(e="https://lh3.googleusercontent.com/d/"+n.match(/https:\/\/drive\.google\.com\/open\?id=(.*)/i)[1]),n.match(/https:\/\/drive\.google\.com\/file\/d/i)&&(e="https://lh3.googleusercontent.com/d/"+n.match(/https:\/\/drive\.google\.com\/file\/d\/(.*)\/view/i)[1]),n.match(/https:\/\/drive\.google\.com\/uc\?export=view/i)&&(e="https://lh3.googleusercontent.com/d/"+n.match(/id=(.*)/i)[1]);let l=n.replace(/\&amp;/gi,"&"),r=l.match(/(http:|https:|)\/\/(player.|www.|m.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);return void 0!==r&&null!=r&&(e="https://img.youtube.com/vi/"+r[6]+"/0.jpg"),l.match(/\.png|\.svg|\.jpg|\.gif|.webp/i)&&(e=l),e},googlesheet=function(t,e){return`https://opensheet.elk.sh/${t.match(/spreadsheets\/d\/(.*)\/edit/i)[1]}/${e}`},GoogleSheetCsvURL=function(t){t=new URL(t);let e=t.pathname.split("/")[3],n=new URLSearchParams(t.hash.slice(1)).get("gid")||0;return`https://docs.google.com/spreadsheets/d/${e}/export?format=csv&gid=${n}`},rescale=function([t,e],[n,l]){return function(r){return(r-t)/(e-t)*(l-n)+n}},bfilter=function(t,e){let n=[],l=0;for(let r=0;r<t.length;r++)""!=t[r][e]&&void 0!=t[r][e]&&(n[l]={},n[l]=t[r],l++);return n},cfilter=function(t,e,n){let l=[],r=RegExp(n,"i"),i=0;for(let o=0;o<t.length;o++)""!=t[o][e]&&void 0!=t[o][e]&&r.test(t[o][e])&&(l[i]={},l[i]=t[o],i++);return l};sumarray=function(t,e){let n=[],l=0;for(let r=0;r<t.length;r++)n[l]=t[r],l++;for(let i=0;i<e.length;i++)n[l]=e[i],l++;return n},sumarrayc=function(t,e){let n=[],l=0;for(let r=0;r<t.length;r++)n[l]=t[r],l++;for(let i=0;i<e.length;i++)n[l]=e[i],l++;let o=[];for(let s=0;s<n.length;s++)for(let g in n[s])o[g]=!0;let h=[],u=0;for(let c in o)h[u]=c,u++;let f=[];for(let $=0;$<n.length;$++){f[$]={};for(let p=0;p<h.length;p++)void 0===n[$][h[p]]||null==n[$][h[p]]||""==n[$][h[p]]?f[$][h[p]]="":f[$][h[p]]=n[$][h[p]]}return f};const unique=function(t,e){let n=[];for(let l=0;l<t.length;l++)n[t[l][e]]=0;let r=[];for(let i in n)r.push(i);return r},sortbylist=function(t,e,n){let l=[];for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)t[i][n]==e[r]&&l.push(t[i]);return l},alphabetic=function(t,e){let n=unique(t,e);return n.sort(),sortbylist(t,n,e)},tags=function(t,e,n){let l=[],r=[];for(let i=0;i<t.length;i++){r=[],r=t[i][e].split(n);for(let o=0;o<r.length;o++)l.push(r[o])}let s=[];for(let g=0;g<l.length;g++)s[l[g]]=0;let h=[];for(let u in s)h.push(u);return h},shuffle=function(t,e){let n=[],l=0,r=!1,i=0;for(;l<e;){i=parseInt(Math.random()*t),r=!1;for(let o=0;o<n.length;o++)i==n[o]&&(r=!0);!r&&(n[n.length]=i,l++)}return n},select=function(t,e,n){let l=[];for(let r=0;r<t.length;r++)e(l,t[r],n);return l},patterncheck=function(t,e,n){let l=!1;for(let r=0;r<Object.keys(e).length;r++)n.test(e[Object.keys(e)[r]])&&(l=!0);l&&t.push(e)},selectp=function(t,e){return select(t,patterncheck,e)},multipatterncheck_add=function(t,e,n){if(""!=n||void 0!==n){let l=!1,r=n.split(" "),i="";for(let o=0;o<r.length;o++)for(let s=0;s<Object.keys(e).length;s++)(i=RegExp(r[o],"i")).test(e[Object.keys(e)[s]])&&(l=!0);l&&t.push(e)}else t.push(e)},selecta=function(t,e){return select(t,multipatterncheck_add,e)},multipatterncheck_exclude=function(t,e,n){if(""!=n||void 0!==n){let l=n.split(" "),r="",i=[],o=!0;for(let s=0;s<l.length;s++)i[l[s]]=!1;for(let g=0;g<Object.keys(e).length;g++)for(let h=0;h<l.length;h++)(r=RegExp(l[h],"i")).test(e[Object.keys(e)[g]])&&(i[l[h]]=!0);for(let u=0;u<l.length;u++)!1==i[l[u]]&&(o=!1);o&&t.push(e)}else t.push(e)},selecte=function(t,e){return select(t,multipatterncheck_exclude,e)};let omnifdados=[],omnifilterfetchdata=function(t,e){fetch(t).then(t=>t.json()).then(t=>{startomnifilter(t,e,omnifilter)})},omnifilterfetchcsvdata=function(t,e){fetch(t).then(t=>t.text()).then(t=>{let n=t.length,l="",r=0;for(let i=0;i<n;i++)'"'==t.substring(i,i+1)&&r++,"\n"==t.substring(i,i+1)&&r%2!=0&&(t=l=t.substring(0,i)+" "+t.substring(i+1));let o=t.split(/\r?\n|\r|\n/g),s="",g="",h="",u="",c=o[0].split(","),f=[];for(let $=1;$<o.length;$++){f[$-1]={},s=o[$].split(/[,]{1}(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/);for(let p=0;p<s.length;p++)s[p].trim(),'"'==(h='"'==s[p].substring(0,1)?s[p].substring(1,s[p].length):s[p]).substring(h.length-2,h.length)&&(h=h.substring(0,h.length-2)),g=(u='"'==h.substring(h.length-1,h.length)?h.substring(0,h.length-1):h).replace(/""/g,'"'),f[$-1][c[p]]=g}startomnifilter(f,e,omnifilter)})},startomnifilter=function(t,e,n){console.log("Omnifilter: fetch finished"),console.table(t),document.getElementById(e).addEventListener("input",function(e){n(select(t,multipatterncheck_exclude,this.value))}),console.log("Omnifilter: filtering event listener started");n(select(t,multipatterncheck_exclude,""))};